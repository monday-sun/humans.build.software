---
import CallToAction from './CallToAction.astro'
import { siteConfig } from '../data/site.js'
import { Icon } from 'astro-icon/components'
import { getCollection } from 'astro:content'

// Get the primary author for credit
const authors = await getCollection('authors')
const primaryAuthor = authors.find((author) => author.id === 'monday-romelfanger')
const githubLink = primaryAuthor?.data.social?.github?.url || 'https://github.com/monday-sun'
const authorName = primaryAuthor?.data.name || 'Monday Romelfanger'

const currentYear = new Date().getFullYear()
---

<footer>
  <CallToAction />
  <section class="py-8">
    <div class="container">
      <div class="footer-content">
        <p>
          &copy; {currentYear} - {siteConfig.name}. Created by <a href={githubLink}>{authorName}</a>.
        </p>
        <p class="theme-credit">
          Built with <a
            href="https://astro.build/themes/details/accessible-astro-starter/"
            target="_blank"
            rel="noopener noreferrer">Accessible Astro</a
          >.
        </p>
      </div>
    </div>
  </section>
</footer>

<style>
  .footer-content {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
  }

  .theme-credit {
    opacity: 0.8;
    font-size: 0.9rem;
  }

  @media (min-width: 768px) {
    .footer-content {
      flex-direction: row;
      justify-content: space-between;
      align-items: center;
    }
  }
</style>
